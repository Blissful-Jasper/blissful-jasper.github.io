---
layout: page
title: "所有文章"
permalink: /posts/
---

<div class="posts-page">
  <div class="posts-header">
    <h1>所有文章</h1>
    <p>共 {{ site.posts.size }} 篇文章</p>
  </div>

  {% if site.features.search %}
  <div class="search-box">
    <input type="text" id="search-input" placeholder="搜索文章...">
    <i class="fas fa-search"></i>
  </div>
  {% endif %}

  <div class="posts-list">
    {% for post in paginator.posts %}
    <article class="post-item">
      <div class="post-content">
        <h2 class="post-title">
          <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
        </h2>
        
        <div class="post-meta">
          <time datetime="{{ post.date | date_to_xmlschema }}">
            {{ post.date | date: "%Y年%-m月%-d日" }}
          </time>
          
          {% if post.categories %}
          <div class="post-categories">
            {% for category in post.categories %}
            <span class="category">{{ category }}</span>
            {% endfor %}
          </div>
          {% endif %}
        </div>
        
        {% if post.excerpt %}
        <div class="post-excerpt">
          {{ post.excerpt | strip_html | truncatewords: 50 }}
        </div>
        {% endif %}
        
        {% if post.tags %}
        <div class="post-tags">
          {% for tag in post.tags limit:5 %}
          <a href="/tags/#{{ tag | slugify }}" class="tag">{{ tag }}</a>
          {% endfor %}
        </div>
        {% endif %}
      </div>
    </article>
    {% endfor %}
  </div>

  <!-- 分页 -->
  {% if paginator.total_pages > 1 %}
  <nav class="pagination">
    {% if paginator.previous_page %}
    <a href="{{ paginator.previous_page_path | relative_url }}" class="prev">
      <i class="fas fa-chevron-left"></i>
      上一页
    </a>
    {% endif %}
    
    <div class="page-numbers">
      {% for page in (1..paginator.total_pages) %}
        {% if page == paginator.page %}
        <span class="current">{{ page }}</span>
        {% elsif page == 1 %}
        <a href="/posts/">{{ page }}</a>
        {% else %}
        <a href="{{ site.paginate_path | relative_url | replace: ':num', page }}">{{ page }}</a>
        {% endif %}
      {% endfor %}
    </div>
    
    {% if paginator.next_page %}
    <a href="{{ paginator.next_page_path | relative_url }}" class="next">
      下一页
      <i class="fas fa-chevron-right"></i>
    </a>
    {% endif %}
  </nav>
  {% endif %}
</div>

{% if site.features.search %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('search-input');
  const postItems = document.querySelectorAll('.post-item');
  
  searchInput.addEventListener('input', function() {
    const searchTerm = this.value.toLowerCase();
    
    postItems.forEach(item => {
      const title = item.querySelector('.post-title').textContent.toLowerCase();
      const excerpt = item.querySelector('.post-excerpt') ? 
        item.querySelector('.post-excerpt').textContent.toLowerCase() : '';
      const tags = Array.from(item.querySelectorAll('.tag')).map(tag => 
        tag.textContent.toLowerCase()).join(' ');
      
      if (title.includes(searchTerm) || excerpt.includes(searchTerm) || tags.includes(searchTerm)) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
  });
});
</script>
{% endif %}
