---
layout: page
title: Gallery Test Simple
permalink: /gallery-test-simple.html
---

<link rel="stylesheet" href="{{ '/assets/gallery-page.css' | relative_url }}">

<div class="gallery-container">
  <h1>图片查看原图测试（简化版）</h1>
  
  <div class="test-images">
    <div class="gallery-item" data-category="test">
      <div class="gallery-card">
        <div class="image-container">
          <img src="{{ '/_picture/DSC_1354.jpg' | relative_url }}" alt="测试图片" loading="lazy">
          <div class="image-overlay">
            <div class="overlay-content">
              <h3>测试图片</h3>
              <p>这是一张测试图片</p>
            </div>
          </div>
        </div>
        <div class="photo-actions">
          <button class="action-btn view-btn" 
                  data-image="{{ '/_picture/DSC_1354.jpg' | relative_url }}"
                  data-title="测试图片"
                  data-description="这是一张测试图片"
                  data-original="/_picture/DSC_1354.jpg"
                  data-location="测试地点"
                  data-date="2024-01-01"
                  data-camera="测试相机"
                  data-tags="测试,风景"
                  onclick="openLightboxFromButton(this)">
            <i class="fas fa-expand"></i>
            <span class="btn-text">查看原图</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Lightbox Modal -->
<div id="lightbox" class="lightbox">
  <div class="lightbox-overlay" onclick="closeLightbox()"></div>
  <div class="lightbox-content">
    <div class="lightbox-header">
      <div class="lightbox-controls">
        <button class="control-btn" id="viewOriginalBtn" onclick="viewOriginalImage()" title="查看原图">
          <i class="fas fa-expand-arrows-alt"></i>
          <span>原图</span>
        </button>
        <button class="control-btn" id="downloadBtn" onclick="downloadImage()" title="下载图片">
          <i class="fas fa-download"></i>
          <span>下载</span>
        </button>
        <button class="control-btn" id="shareBtn" onclick="shareCurrentImage()" title="分享图片">
          <i class="fas fa-share-alt"></i>
          <span>分享</span>
        </button>
      </div>
      <button class="lightbox-close" onclick="closeLightbox()" title="关闭">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="lightbox-image-container">
      <img id="lightbox-image" src="" alt="" loading="lazy">
      <div class="image-loading" id="imageLoading">
        <i class="fas fa-spinner fa-spin"></i>
        <span>加载中...</span>
      </div>
    </div>
    
    <div class="lightbox-info">
      <div class="info-content">
        <h3 id="lightbox-title">图片标题</h3>
        <p id="lightbox-description">图片描述</p>
        <div class="image-meta" id="lightbox-meta">
          <!-- 元数据信息 -->
        </div>
      </div>
      <div class="image-actions">
        <button class="action-button zoom-in" onclick="zoomImage(1.2)" title="放大">
          <i class="fas fa-search-plus"></i>
        </button>
        <button class="action-button zoom-out" onclick="zoomImage(0.8)" title="缩小">
          <i class="fas fa-search-minus"></i>
        </button>
        <button class="action-button zoom-reset" onclick="resetZoom()" title="重置">
          <i class="fas fa-compress"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<div class="debug-info">
  <h3>调试信息</h3>
  <pre id="debug-output">等待测试...</pre>
  <button onclick="testImagePaths()">测试图片路径</button>
  <button onclick="testLightbox()">测试Lightbox</button>
</div>

<script src="{{ '/assets/gallery-page.js' | relative_url }}"></script>

<script>
  // 简化版测试函数
  function openLightboxFromButton(button) {
    const imageSrc = button.dataset.image;
    const title = button.dataset.title;
    const description = button.dataset.description;
    const originalPath = button.dataset.original;
    const location = button.dataset.location;
    const date = button.dataset.date;
    const camera = button.dataset.camera;
    const tags = button.dataset.tags;
    
    console.log('Test - Opening lightbox with:', {
      imageSrc, title, description, originalPath, location, date, camera, tags
    });
    
    document.getElementById('debug-output').textContent = JSON.stringify({
      imageSrc, title, description, originalPath, location, date, camera, tags
    }, null, 2);
    
    const metadata = {
      location: location,
      date: date,
      camera: camera,
      tags: tags ? tags.split(',') : []
    };
    
    const options = {
      originalPath: originalPath,
      thumbnail: imageSrc,
      metadata: metadata
    };
    
    openLightbox(imageSrc, title, description, options);
  }
  
  function testImagePaths() {
    const img = document.querySelector('.gallery-item img');
    const btn = document.querySelector('.action-btn[data-image]');
    
    document.getElementById('debug-output').textContent = `
图片src: ${img.src}
按钮data-image: ${btn.dataset.image}
按钮data-original: ${btn.dataset.original}
完整URL测试:
- 相对路径: {{ '/_picture/DSC_1354.jpg' | relative_url }}
- 绝对路径: {{ '/_picture/DSC_1354.jpg' | absolute_url }}
    `;
  }
  
  function testLightbox() {
    const button = document.querySelector('.action-btn[data-image]');
    openLightboxFromButton(button);
  }
</script>

<style>
.test-images {
  max-width: 400px;
  margin: 20px auto;
}

.debug-info {
  margin: 40px auto;
  max-width: 600px;
  padding: 20px;
  border: 2px solid #ccc;
  border-radius: 8px;
  background: #f9f9f9;
}

.debug-info pre {
  background: white;
  padding: 15px;
  border-radius: 4px;
  overflow: auto;
  max-height: 300px;
}

.debug-info button {
  margin: 5px;
  padding: 8px 15px;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.debug-info button:hover {
  background: #0056b3;
}
</style>
