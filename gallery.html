---
layout: page
title: Gallery
permalink: /gallery.html
---

<link rel="stylesheet" href="{{ '/assets/gallery-page.css' | relative_url }}">

<!-- 页面访问统计 -->
<div class="page-stats-header">
  <div class="stats-info">
    <span class="current-time" id="currentTime"></span>
    <span class="visitor-info" id="visitorInfo">正在加载访问信息...</span>
  </div>
</div>

<!-- Main Gallery Container -->
<div class="gallery-container">
  
  <!-- ==================== Header Section ==================== -->
  <div class="gallery-header">
    <div class="header-content">
      <h1 class="page-title">
        <i class="fas fa-camera"></i>
        摄影作品集
      </h1>
      <p class="page-subtitle">记录科研路上的美好瞬间</p>
      
      <!-- 实时统计信息 -->
      <div class="header-stats">
        <div class="quick-stats">
          {% assign total_photos = 0 %}
          {% for category in site.data.gallery %}
            {% assign total_photos = total_photos | plus: category.photos.size %}
          {% endfor %}
          <span class="quick-stat-item">
            <i class="fas fa-images"></i>
            {{ total_photos }} 张照片
          </span>
          <span class="quick-stat-item">
            <i class="fas fa-layer-group"></i>
            {{ site.data.gallery.size }} 个分类
          </span>
          <span class="quick-stat-item">
            <i class="fas fa-map-marker-alt"></i>
            8 个地点
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== Filter Section ==================== -->
  <div class="gallery-filters">
    <button class="filter-btn active" data-category="all">
      <i class="fas fa-th"></i>
      全部
    </button>
    {% for category in site.data.gallery %}
      <button class="filter-btn" data-category="{{ category.id }}">
        <i class="fas fa-{{ category.icon | default: 'images' }}"></i>
        {{ category.title }}
      </button>
    {% endfor %}
  </div>

  <!-- ==================== Gallery Grid ==================== -->
  <div class="gallery-grid">
    {% for category in site.data.gallery %}
      {% for photo in category.photos %}
        <div class="gallery-item" data-category="{{ category.id }}">
          <div class="gallery-card">
            <div class="image-container">
              <img src="{{ photo.image | relative_url }}" alt="{{ photo.title }}" loading="lazy">
              <div class="image-overlay">
                <div class="overlay-content">
                  <h3>{{ photo.title }}</h3>
                  <p>{{ photo.description }}</p>
                  <div class="photo-meta">
                    {% if photo.location %}
                      <span class="meta-item">
                        <i class="fas fa-map-marker-alt"></i>
                        {{ photo.location }}
                      </span>
                    {% endif %}
                    {% if photo.date %}
                      <span class="meta-item">
                        <i class="fas fa-calendar"></i>
                        {{ photo.date }}
                      </span>
                    {% endif %}
                    {% if photo.camera %}
                      <span class="meta-item">
                        <i class="fas fa-camera"></i>
                        {{ photo.camera }}
                      </span>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            <div class="photo-actions">
              <button class="action-btn view-btn" 
                      data-image="{{ photo.image | relative_url }}"
                      data-title="{{ photo.title | escape }}"
                      data-description="{{ photo.description | escape }}"
                      data-original="{{ photo.image }}"
                      data-location="{{ photo.location | escape }}"
                      data-date="{{ photo.date | escape }}"
                      data-camera="{{ photo.camera | escape }}"
                      data-tags="{{ photo.tags | join: ',' | escape }}"
                      onclick="openLightboxFromButton(this)">
                <i class="fas fa-expand"></i>
                <span class="btn-text">查看</span>
              </button>
                <button class="action-btn share-btn" 
                      data-title="{{ photo.title | escape }}"
                      data-image="{{ photo.image | absolute_url }}"
                      onclick="sharePhotoFromButton(this)">
                <i class="fas fa-share-alt"></i>
                <span class="btn-text">分享</span>
              </button>
            </div>
          </div>
          <div class="photo-footer">
            <div class="photo-tags">
              {% for tag in photo.tags %}
                <span class="tag" data-tag="{{ tag }}">{{ tag }}</span>
              {% endfor %}
            </div>
            <div class="photo-category">
              <span class="category-badge category-{{ category.id }}">{{ category.title }}</span>
            </div>
          </div>
        </div>
      {% endfor %}
    {% endfor %}
  </div>

  <!-- ==================== Statistics Section ==================== -->
  <div class="gallery-stats">
    <div class="stat-item">
      {% assign total_photos = 0 %}
      {% for category in site.data.gallery %}
        {% assign total_photos = total_photos | plus: category.photos.size %}
      {% endfor %}
      <span class="stat-number" id="totalPhotos">{{ total_photos }}</span>
      <span class="stat-label">张照片</span>
    </div>
    <div class="stat-item">
      <span class="stat-number">{{ site.data.gallery.size }}</span>
      <span class="stat-label">个分类</span>
    </div>
    <div class="stat-item">
      <span class="stat-number">5</span>
      <span class="stat-label">年拍摄</span>
    </div>
    <div class="stat-item">
      <span class="stat-number">8</span>
      <span class="stat-label">个地点</span>
    </div>
  </div>
  
</div>

<!-- ==================== Enhanced Lightbox Modal ==================== -->
<div id="lightbox" class="lightbox">
  <div class="lightbox-overlay" onclick="closeLightbox()"></div>
  <div class="lightbox-content">
    <div class="lightbox-header">
      <div class="lightbox-controls">
        <button class="control-btn" id="viewOriginalBtn" onclick="viewOriginalImage()" title="查看原图">
          <i class="fas fa-expand-arrows-alt"></i>
          <span>原图</span>
        </button>
        <button class="control-btn" id="downloadBtn" onclick="downloadImage()" title="下载图片">
          <i class="fas fa-download"></i>
          <span>下载</span>
        </button>
        <button class="control-btn" id="shareBtn" onclick="shareCurrentImage()" title="分享图片">
          <i class="fas fa-share-alt"></i>
          <span>分享</span>
        </button>
      </div>
      <button class="lightbox-close" onclick="closeLightbox()" title="关闭">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <div class="lightbox-image-container">
      <img id="lightbox-image" src="" alt="" loading="lazy">
      <div class="image-loading" id="imageLoading">
        <i class="fas fa-spinner fa-spin"></i>
        <span>加载中...</span>
      </div>
    </div>
    
    <div class="lightbox-info">
      <div class="info-content">
        <h3 id="lightbox-title">图片标题</h3>
        <p id="lightbox-description">图片描述</p>
        <div class="image-meta" id="lightbox-meta">
          <!-- 元数据信息将通过JavaScript填充 -->
        </div>
      </div>
      <div class="image-actions">
        <button class="action-button zoom-in" onclick="zoomImage(1.2)" title="放大">
          <i class="fas fa-search-plus"></i>
        </button>
        <button class="action-button zoom-out" onclick="zoomImage(0.8)" title="缩小">
          <i class="fas fa-search-minus"></i>
        </button>
        <button class="action-button zoom-reset" onclick="resetZoom()" title="重置">
          <i class="fas fa-compress"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- External JavaScript -->
<script src="{{ '/assets/gallery-page.js' | relative_url }}"></script>
