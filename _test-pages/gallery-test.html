---
layout: page
title: Gallery功能测试
---

<style>
.test-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.test-section {
  margin: 2rem 0;
  padding: 1.5rem;
  border: 1px solid #e9ecef;
  border-radius: 8px;
  background: #f8f9fa;
}

.test-title {
  color: #495057;
  margin-bottom: 1rem;
  font-size: 1.2rem;
  font-weight: 600;
}

.test-item {
  margin: 0.75rem 0;
  padding: 0.5rem;
  background: white;
  border-radius: 4px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.test-status {
  padding: 0.25rem 0.75rem;
  border-radius: 12px;
  font-size: 0.8rem;
  font-weight: 500;
}

.status-pass {
  background: #d4edda;
  color: #155724;
}

.status-fail {
  background: #f8d7da;
  color: #721c24;
}

.status-warning {
  background: #fff3cd;
  color: #856404;
}

.simple-gallery {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin: 1rem 0;
}

.simple-gallery img {
  width: 100%;
  height: 150px;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  border: 2px solid #dee2e6;
}

.simple-gallery .error img {
  border-color: #dc3545;
}

.simple-gallery .success img {
  border-color: #28a745;
}

.simple-gallery .caption {
  text-align: center;
  margin-top: 0.5rem;
  font-size: 0.8rem;
  font-weight: 500;
}

.demo-button {
  padding: 0.5rem 1rem;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-right: 0.5rem;
  margin-bottom: 0.5rem;
  text-decoration: none;
  display: inline-block;
}

.demo-button:hover {
  background: #0056b3;
  color: white;
  text-decoration: none;
}
</style>

<div class="test-container">
  <h1>🧪 Gallery功能测试</h1>
  <p>测试Gallery页面的各项功能是否正常工作。</p>

  <!-- 基础数据测试 -->
  <div class="test-section">
    <h2 class="test-title">📊 数据完整性检查</h2>
    
    <div class="test-item">
      <span>Gallery数据文件</span>
      <span class="test-status {% if site.data.gallery %}status-pass{% else %}status-fail{% endif %}">
        {% if site.data.gallery %}✅ 已加载{% else %}❌ 未找到{% endif %}
      </span>
    </div>
    
    <div class="test-item">
      <span>图片总数</span>
      <span class="test-status status-pass">
        {% assign total_photos = 0 %}
        {% for category in site.data.gallery %}
          {% assign total_photos = total_photos | plus: category.photos.size %}
        {% endfor %}
        ✅ {{ total_photos }}张
      </span>
    </div>
    
    <div class="test-item">
      <span>分类总数</span>
      <span class="test-status status-pass">✅ {{ site.data.gallery.size }}个</span>
    </div>
  </div>

  <div class="simple-gallery">
  <div>
    <img src="/pictures/DSC_1667.JPG" alt="Test Image 1">
    <div class="caption">DSC_1667.JPG</div>
  </div>
  <div>
    <img src="/pictures/DSC_1573.jpg" alt="Test Image 2">
    <div class="caption">DSC_1573.jpg</div>
  </div>
  <div>
    <img src="/pictures/DSC_1682.jpg" alt="Test Image 3">
    <div class="caption">DSC_1682.jpg</div>
  </div>
  <div>
    <img src="/pictures/DSC_1354.jpg" alt="Test Image 4">
    <div class="caption">DSC_1354.jpg</div>
  </div>
</div>

<h3>数据驱动测试（使用 gallery.yml）:</h3>

<div class="simple-gallery">
{% for category in site.data.gallery %}
  {% for photo in category.photos %}
    <div>
      <img src="{{ photo.image }}" alt="{{ photo.title }}">
      <div class="caption">{{ photo.title }}</div>
      <small>路径: {{ photo.image }}</small>
    </div>
  {% endfor %}
{% endfor %}
</div>

  <!-- 图片加载测试 -->
  <div class="test-section">
    <h2 class="test-title">🖼️ 图片文件测试</h2>
    <p>检查所有引用的图片文件是否能正常加载：</p>
    
    <div class="simple-gallery">
      {% for category in site.data.gallery %}
        {% for photo in category.photos %}
          <div class="gallery-test-item" data-image="{{ photo.image }}">
            <img src="{{ photo.image | relative_url }}" alt="{{ photo.title }}" 
                 onload="this.parentElement.classList.add('success')"
                 onerror="this.parentElement.classList.add('error')">
            <div class="caption">{{ photo.title }}</div>
          </div>
        {% endfor %}
      {% endfor %}
    </div>
  </div>

  <!-- 功能链接 -->
  <div class="test-section">
    <h2 class="test-title">🔗 页面导航</h2>
    <a href="/gallery.html" class="demo-button">📸 完整Gallery页面</a>
    <a href="/blog.html" class="demo-button">📝 Blog页面</a>
    <a href="/demo.html" class="demo-button">🎯 功能演示页面</a>
    <a href="/" class="demo-button">🏠 返回首页</a>
  </div>

  <!-- 长内容测试阅读进度条 -->
  <div class="test-section">
    <h2 class="test-title">📊 阅读进度条测试</h2>
    <p>向下滚动查看顶部的阅读进度条效果：</p>
    
    <div style="height: 150vh; background: linear-gradient(to bottom, #667eea, #764ba2); padding: 2rem; border-radius: 8px; color: white;">
      <h3>长内容测试区域</h3>
      <p>这是一个很长的内容区域，用于测试阅读进度条功能。</p>
      {% for i in (1..15) %}
        <p style="margin: 2rem 0; line-height: 1.8;">
          段落 {{ i }}：这是测试用的内容段落。当您滚动页面时，顶部应该会显示阅读进度条，
          指示当前的阅读进度。进度条会根据滚动位置实时更新，并在右上角显示百分比。
          继续向下滚动以查看进度条的变化效果。
        </p>
      {% endfor %}
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // 延迟统计图片加载情况
  setTimeout(function() {
    const successImages = document.querySelectorAll('.simple-gallery .success').length;
    const errorImages = document.querySelectorAll('.simple-gallery .error').length;
    const totalImages = document.querySelectorAll('.simple-gallery .gallery-test-item').length;
    
    console.log(`图片加载统计: 成功 ${successImages}/${totalImages}, 失败 ${errorImages}/${totalImages}`);
    
    if (errorImages > 0) {
      console.warn('一些图片加载失败，请检查文件路径');
    }
  }, 3000);
  
  // 标记为测试页面，确保阅读进度条工作
  document.body.classList.add('demo-page');
});
</script>
