<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'zh-cn' }}">

  <head>
    {%- include head.html -%}
    
    <!-- 全站通用功能样式 -->
    {%- include global-features-head.html -%}
    
    <!-- Modern Theme Styles -->
    <link rel="stylesheet" href="/assets/modern-theme.css">
    <link rel="stylesheet" href="/assets/header-styles.css">
    <link rel="stylesheet" href="/assets/footer-styles.css">
    
    <!-- Page-specific styles -->
    {% if page.style %}
      <link rel="stylesheet" href="/assets/{{ page.style }}">
    {% endif %}
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Preload critical scripts -->
    <link rel="preload" href="/assets/modern-interactions.js" as="script">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    <script>
        const AI_API_KEY = "{{ site.ai_api_key }}";
    </script>
  </head>

  <body class="modern-layout">
    <!-- Header -->
    {%- include header.html -%}

    <!-- Main Content -->
    <main class="main-content" role="main">
      <div class="content-wrapper">
        {{ content }}
      </div>
    </main>

    <!-- Footer -->
    {%- include footer.html -%}
    
    <!-- Global Stats Display -->
    {%- include global-stats-display.html -%}
    
    <!-- JavaScript -->
    <script src="/assets/modern-interactions.js"></script>
    
    <!-- Page-specific scripts -->
    {% if page.script %}
      <script src="/assets/{{ page.script }}"></script>
    {% endif %}
    
    <!-- 全站通用功能脚本 -->
    {%- include global-features-footer.html -%}
    
    <!-- Analytics or other tracking scripts can go here -->
    {% if site.analytics %}
      <!-- Analytics code -->
    {% endif %}
  </body>

</html>
