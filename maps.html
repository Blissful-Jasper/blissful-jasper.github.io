<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>实时地图与气候监测</title>
  <link rel="stylesheet" href="assets/main.css">
  <link rel="stylesheet" href="assets/theme-links.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
<div class="markdown-body links-page" style="background:var(--bg-primary);box-shadow:none;padding:2rem;max-width:1100px;margin:2rem auto 2rem auto;">
  <h2 style="margin-bottom:1.5rem;">实时地图与气候监测</h2>
  <div id="maps-main-list"></div>
</div>
<script type="application/json" id="mapsLinksData">
[
  {
    "group": "降水与雷电",
    "links": [
      { "name": "Precipitation from TRMM (3Hr, 24Hr, 72Hr, weekly) and GPM (30 Min)", "url": "https://gpm.nasa.gov/data-access/downloads/trmm" },
      { "name": "Global Lightning Map", "url": "https://www.blitzortung.org/en/live_lightning_maps.php" },
      { "name": "USAID precipitation monitoring", "url": "https://earlywarning.usgs.gov/fews/map" }
    ]
  },
  {
    "group": "卫星与风场",
    "links": [
      { "name": "Windy", "url": "https://www.windy.com/" },
      { "name": "RAMMB Colostate", "url": "https://rammb-slider.cira.colostate.edu/" },
      { "name": "RealEarth Wisconsin-Madison", "url": "https://realearth.ssec.wisc.edu/" },
      { "name": "Meteologix", "url": "https://meteologix.com/" },
      { "name": "EUMETSAT (METEOSAT 0 and 41.5 Degrees)", "url": "https://www.eumetsat.int/our-satellites" },
      { "name": "MIMIC-TPW ver.2 (Total Precipitable Water)", "url": "https://tropic.ssec.wisc.edu/real-time/mimic-tpw/global2/main.html" },
      { "name": "Indian Ocean Tropical Cyclones (CIMSS)", "url": "https://tropic.ssec.wisc.edu/real-time/indian/winds/wgmsat.html" },
      { "name": "Real time Indian Ocean satellite NRL", "url": "https://www.nrlmry.navy.mil/TC.html" },
      { "name": "Remote Sensing Systems", "url": "https://www.remss.com/" },
      { "name": "NASA Worldview Earth data", "url": "https://worldview.earthdata.nasa.gov/" }
    ]
  },
  {
    "group": "MJO 与环流监测",
    "links": [
      { "name": "CPC MJO", "url": "https://www.cpc.ncep.noaa.gov/products/precip/CWlink/MJO/mjo.shtml" },
      { "name": "CPC - Dynamical Model MJO Forecast", "url": "https://www.cpc.ncep.noaa.gov/products/precip/CWlink/MJO/mjo.shtml#model" },
      { "name": "Carl Schreck - MJO RMM index", "url": "https://ncics.org/portfolio/monitor/mjo/" },
      { "name": "Michael Ventrice - MJO RMM index", "url": "https://mikeventrice.weebly.com/mjo.html" },
      { "name": "Kyle Marcritchie - MJO RMM index", "url": "https://www.kylemacritchie.com/mjo/" }
    ]
  },
  {
    "group": "气候灾害与早期预警",
    "links": [
      { "name": "Global Tropics Benefits/Hazards", "url": "https://www.cpc.ncep.noaa.gov/products/precip/CWlink/ghazards/index.php" },
      { "name": "Famine Early Warning System Network (FEWS NET)", "url": "https://fews.net/" },
      { "name": "Climate Hazards Group - US Santa Barbara", "url": "https://www.chc.ucsb.edu/data" }
    ]
  },
  {
    "group": "非洲与印度洋气候",
    "links": [
      { "name": "Indian Ocean Weather and Climate", "url": "https://www.tropmet.res.in/~kolli/links/monsoon.html" },
      { "name": "NCEP MODEL FORECASTS FOR INDIAN OCEAN", "url": "https://www.cpc.ncep.noaa.gov/products/african_desk/indian_ocean_forecasts.shtml" },
      { "name": "Africa Weather and Climate", "url": "https://www.cpc.ncep.noaa.gov/products/international/africa/africa.shtml" }
    ]
  },
  {
    "group": "ENSO/季风/ITCZ",
    "links": [
      { "name": "CPC - El Nino Southeren Oscillation", "url": "https://www.cpc.ncep.noaa.gov/products/precip/CWlink/MJO/enso.shtml" },
      { "name": "ENSO - CPC Diagnostic Discussion", "url": "https://www.cpc.ncep.noaa.gov/products/analysis_monitoring/enso_advisory/" },
      { "name": "CPC - ENSO weekly PPT", "url": "https://www.cpc.ncep.noaa.gov/products/precip/CWlink/MJO/enso.shtml#weekly" },
      { "name": "Pacific Marine Enviromental Laboratory (PMEL) NOAA - TAO", "url": "https://www.pmel.noaa.gov/tao/" },
      { "name": "IRI 925 hPa Monthly wind vector anomaly", "url": "https://iridl.ldeo.columbia.edu/maproom/.Global/.Wind_Anomaly/Monthly925.html" },
      { "name": "Monsoon Online", "url": "https://www.tropmet.res.in/~kolli/links/monsoon.html" },
      { "name": "CPC - Global Monsoon", "url": "https://www.cpc.ncep.noaa.gov/products/Global_Monsoons/" },
      { "name": "CPC - Blocking", "url": "https://www.cpc.ncep.noaa.gov/products/precip/CWlink/blocking/index.shtml" },
      { "name": "CPC - Africa InterTropical Front (IFT)", "url": "https://www.cpc.ncep.noaa.gov/products/international/ift/ift.shtml" }
    ]
  },
  {
    "group": "QBO",
    "links": [
      { "name": "Naujokat @ Free Berlin Univ", "url": "https://www.geo.fu-berlin.de/en/met/ag/strat/produkte/qbo/index.html" },
      { "name": "Lubis @ university of Leipzig", "url": "https://www.uni-leipzig.de/en/profile/mitarbeiter/dr-sandro-lubis" },
      { "name": "Reading university", "url": "https://www.reading.ac.uk/meteorology/research/atmospheric-dynamics/qbo" },
      { "name": "CPC QBO", "url": "https://www.cpc.ncep.noaa.gov/data/indices/qbo.u50.index" }
    ]
  },
  {
    "group": "其他气候监测",
    "links": [
      { "name": "CPC - Outlook and Monthly reports", "url": "https://www.cpc.ncep.noaa.gov/products/OUTLOOKS/" },
      { "name": "NCEP SST", "url": "https://www.cpc.ncep.noaa.gov/products/analysis_monitoring/lanina/enso_evolution-status-fcsts-web.pdf" },
      { "name": "nullschool", "url": "https://earth.nullschool.net/" }
    ]
  }
]
</script>
<script>
// Maps 主内容填充，风格与 links.html 一致
function renderMapsMainList() {
  const container = document.getElementById('maps-main-list');
  if (!container) return;
  const dataTag = document.getElementById('mapsLinksData');
  let mapsLinks = [];
  if (dataTag) {
    try {
      mapsLinks = JSON.parse(dataTag.textContent);
    } catch {}
  }
  container.innerHTML = `${mapsLinks.map((group, gi) => `
    <div class="link-card" style='background:var(--bg-secondary);border-radius:12px;padding:2rem 2.5rem 1.5rem 2.5rem;min-width:320px;max-width:900px;flex:1 1 700px;margin-bottom:2rem;position:relative;display:flex;flex-direction:column;border:1px solid #e0e4ea;'>
      <h3 style='font-size:1.25rem;color:var(--primary-color);margin-bottom:1.2rem;font-weight:600;letter-spacing:0.5px;'>${group.group}</h3>
      <ul style='list-style:none;padding:0;margin:0;'>
        ${group.links.map((link, li) => `<li style='margin-bottom:1.1rem;'><a href='${link.url}' target='_blank' class='ext-link' data-gi='${gi}' data-li='${li}' style='color:var(--secondary-color);font-size:1.08rem;font-weight:500;word-break:break-all;display:inline-block;'><i class='fas fa-link' style='margin-right:9px;'></i>${link.name}</a><div class='link-desc' style='margin-top:0.5rem;'></div></li>`).join('')}
      </ul>
    </div>
  `).join('')}`;
  setTimeout(() => {
    container.querySelectorAll('.ext-link').forEach(a => {
      const url = a.getAttribute('href');
      const descDiv = a.parentElement.querySelector('.link-desc');
      descDiv.innerHTML = '<span style="color:#888;font-size:0.98em;">加载中...</span>';
      fetchLinkMeta(url, descDiv);
      a.addEventListener('click', function(e) {
        window.open(url, '_blank');
      });
    });
  }, 100);
}
// 抓取网页 meta description 或 favicon/logo
function fetchLinkMeta(url, descDiv) {
  fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(url)}`)
    .then(res => res.json())
    .then(data => {
      const html = data.contents;
      let desc = '';
      let img = '';
      const descMatch = html.match(/<meta[^>]*name=["']description["'][^>]*content=["']([^"']+)["'][^>]*>/i) || html.match(/<meta[^>]*content=["']([^"']+)["'][^>]*name=["']description["'][^>]*>/i);
      if (descMatch) desc = descMatch[1];
      const imgMatch = html.match(/<meta[^>]*property=["']og:image["'][^>]*content=["']([^"']+)["'][^>]*>/i);
      if (imgMatch) img = imgMatch[1];
      if (!img) {
        const favMatch = html.match(/<link[^>]*rel=["'](?:shortcut )?icon["'][^>]*href=["']([^"']+)["'][^>]*>/i);
        if (favMatch) {
          let favUrl = favMatch[1];
          if (!favUrl.startsWith('http')) {
            try {
              const u = new URL(url);
              favUrl = u.origin + (favUrl.startsWith('/') ? favUrl : '/' + favUrl);
            } catch {}
          }
          img = favUrl;
        }
      }
      let htmlStr = '';
      if (img) htmlStr += `<img src='${img}' alt='logo' style='max-width:60px;max-height:60px;display:block;margin-bottom:0.5em;border-radius:8px;'>`;
      if (desc) htmlStr += `<div style='color:#666;font-size:0.98em;'>${desc}</div>`;
      if (!desc && !img) htmlStr = `<span style='color:#aaa;font-size:0.98em;'>暂无简介/图片</span>`;
      descDiv.innerHTML = htmlStr;
    })
    .catch(() => {
      descDiv.innerHTML = `<span style='color:#aaa;font-size:0.98em;'>暂无简介/图片</span>`;
    });
}
document.addEventListener('DOMContentLoaded', renderMapsMainList);
</script>
</body>
</html>
